<p class="table-title flex flex-row justify-between items-center">
    <span>แผนงาน/รายละเอียด</span>
    <span class="flex items-center cursor-pointer" (click)="addMainMethod();">
        <mat-icon style="color:white" svgIcon="heroicons_outline:plus"></mat-icon>เพิ่มแผนงาน/รายละเอียด
    </span>
</p>
<table mat-table [dataSource]="mainMethods" multiTemplateDataRows #mainMethodTable>
    <ng-container matColumnDef="mainMethodId">
        <td mat-cell *matCellDef="let element; let i = dataIndex">
            {{element.data.mainMethodId}}
        </td>
    </ng-container>
    <ng-container matColumnDef="mainMethodDetail">
        <td mat-cell *matCellDef="let element; let i = dataIndex">
            <div class="flex flex-col w-full">
                <app-plan-table class="border-x border-x-white" 
                    [runningNo]="runningNo"
                    [targetIndex]="targetIndex"
                    [subTargetIndex]="subTargetIndex"
                    [mainMethodIndex]="i"
                    [plans]="element.kids.planRecords">
                </app-plan-table>
                <app-method-table class="border-x border-x-white"
                    [runningNo]="runningNo"
                    [targetIndex]="targetIndex"
                    [subTargetIndex]="subTargetIndex"
                    [mainMethodIndex]="i"
                    [methods]="element.kids.methodRecords"
                ></app-method-table>    
            </div>
        </td>
    </ng-container>
    <ng-container matColumnDef="deleteIcon">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element; let i = dataIndex">
            <mat-icon (click)="deleteMainMethod(i);" svgIcon="heroicons_outline:x" class="w-5 min-w-5 cursor-pointer" title="ลบแผนงาน/รายละเอียด"></mat-icon>
        </td>
    </ng-container>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="normal-row"></tr>
</table>