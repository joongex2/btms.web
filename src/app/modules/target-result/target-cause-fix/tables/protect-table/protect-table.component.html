<p class="protect-header table-title flex flex-row justify-between items-center">
    <span>การป้องกันการเกิดซ้ำ</span>
    <span *ngIf="!readonly" class="flex items-center cursor-pointer" (click)="addProtect();">
        <mat-icon style="color:white" svgIcon="heroicons_outline:plus"></mat-icon>การป้องกันการเกิดซ้ำ
    </span>
</p>
<table mat-table [dataSource]="protects" multiTemplateDataRows #protectTable>
    <ng-container matColumnDef="sequenceNo">
        <th mat-header-cell *matHeaderCellDef>ลำดับที่</th>
        <td mat-cell *matCellDef="let element; let i = dataIndex">
            {{element.sequenceNo}}
        </td>
    </ng-container>
    <ng-container matColumnDef="solutionTopic">
        <th mat-header-cell *matHeaderCellDef>รายละเอียดการแก้ไข</th>
        <td mat-cell *matCellDef="let element">
            {{element.solutionTopic}}
        </td>
    </ng-container>
    <ng-container matColumnDef="userResponsibility">
        <th mat-header-cell *matHeaderCellDef>ผู้รับผิดชอบ</th>
        <td mat-cell *matCellDef="let element">
            {{element.userResponsibility}}
        </td>
    </ng-container>
    <ng-container matColumnDef="finishDate">
        <th mat-header-cell *matHeaderCellDef>กำหนดเสร็จ</th>
        <td mat-cell *matCellDef="let element">
            {{element.finishDate | date: 'dd/MM/yyyy'}}
        </td>
    </ng-container>
    <ng-container matColumnDef="solutionDescription">
        <th mat-header-cell *matHeaderCellDef>การติดตามการป้องกัน</th>
        <td mat-cell *matCellDef="let element">
            {{element.solutionDescription}}
        </td>
    </ng-container>
    <ng-container matColumnDef="actionDate">
        <th mat-header-cell *matHeaderCellDef>วันที่ดำเนินการ</th>
        <td mat-cell *matCellDef="let element">
            {{element.actionDate | date: 'dd/MM/yyyy'}}
        </td>
    </ng-container>
    <ng-container matColumnDef="editIcon">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element; let i = dataIndex">
            <mat-icon *ngIf="!readonly" (click)="editProtect(i)" svgIcon="heroicons_solid:pencil" class="icon-size-4 cursor-pointer" style="color: #89813d" title="Edit การป้องกันการเกิดซ้ำ"></mat-icon>
        </td>
    </ng-container>
    <ng-container matColumnDef="deleteIcon">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element; let i = dataIndex">
            <mat-icon *ngIf="!readonly" (click)="deleteProtect(element, i)" svgIcon="heroicons_outline:x" class="text-warn icon-size-4 cursor-pointer"
                title="Delete การป้องกันการเกิดซ้ำ"></mat-icon>
        </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="dataColumns"></tr>
    <tr mat-row [class.hidden]="row.markForDelete" *matRowDef="let element; let row; columns: dataColumns"></tr>
</table>